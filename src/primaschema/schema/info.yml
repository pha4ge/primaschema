id: https://github.com/pha4ge/primer-schemes/schemas/primer-scheme
name: primer-scheme
description: Data model for tiling primer scheme definitions
version: 1.0.0-alpha
prefixes:
  linkml: https://w3id.org/linkml/
  schema: http://schema.org/
  ORCID: http://identifiers.org/orcid/
  GENEPIO: http://purl.obolibrary.org/obo/GENEPIO_
  IAO: "http://purl.obolibrary.org/obo/IAO_"
  EDAM: "http://edamontology.org/data_"
default_curi_maps:
  - semweb_context
imports:
  - linkml:types
default_range: string

classes:
  PrimerScheme:
    tree_root: true
    description: "A tiled amplicon PCR primer scheme definition"
    rules:
      - description: "Require version suffix for ref selection"
        preconditions:
          slot_conditions:
            version:
              pattern: "^v\\d+\\.\\d+\\.\\d+$" 
        postconditions:
          slot_conditions:
            ref_selections:
              maximum_cardinality: 0
    slots:
      - schema_version
      - name
      - amplicon_size
      - version
      - contributors
      - target_organisms
      - aliases
      - license
      - status
      - tags
      - derived_from
      - citations
      - notes
      - vendors
      - algorithm
      - primer_checksum
      - primer_file_sha256
      - reference_checksum
      - reference_file_sha256
      - ref_selections

  Vendor:
    class_uri: GENEPIO:0100674
    description: "Vendor of the primers described in the amplicon scheme or a kit containing these primers"
    attributes:
      organisation_name:
        description: "The name of the vendor"
        required: true
      home_page:
        description: "A link to the home page of the vendor"
      kit_name:
        slot_uri: GENEPIO:0100693
        description: "Vendor specific kit name for primer kit"

  Contributor:
    class_uri: IAO:contributor
    description: "Person or organisation who contributed to primerscheme development"
    attributes:
      name:
        slot_uri: IAO:0000590 # A textual entity that denotes a particular in reality.
        description: "The name of the person or organisation"
        required: true
      orcid:
        slot_uri: IAO:0000708
        description: "ORCID ('Open Researcher and Contributor IDentifier') of a person"
      email:
        slot_uri: IAO:0000429
        description: "Contact email"
        pattern: "^[\\w\\-\\.]+@([\\w-]+\\.)+[\\w-]{2,}$"

  Algorithm:
    class_uri: IAO:0000064
    description: "Algorithm used to generate the primerscheme"
    attributes:
      name:
        description: "The name of the Algorithm"
        required: true
      version: 
        slot_uri: IAO:0000129
        description: "The version of the Algorithm"

  RefSelection:
      attributes:
        file_sha256:
          description: SHA256 checksum for the reference selection file
          pattern: "^[a-fA-F0-9]{64}$"
        file_name: 
          description: File name of the reference selection file
        chromosome: 
          description: The chromosome in the primerbed file for which this provides reference selection

  TargetOrganism:
    class_uri: EDAM:1869
    description: "The organisms targeted by this primerscheme"
    attributes:
      common_name:
        slot_uri: EDAM:1874
        description: The common name of the organism
      ncbi_tax_id:
        slot_uri: EDAM:1179
        description: A stable unique identifier for each taxon (for a species, a family, an order, or any other group) in the NCBI taxonomy database

slots:
  schema_version:
    required: true
    description: The version of the schema used to create this scheme definition
  name:
    slot_uri: GENEPIO:0001456
    required: true
    identifier: true
    description: The canonical name of the primer scheme (lowercase)
    pattern: "^[\\da-z0-9_.-]+$"
  version:
    description: The semantic version of the scheme (v.{x}.{y}.{z})
    required: true
    pattern: "^v\\d+\\.\\d+\\.\\d+(-[a-z0-9]+)?$"
  contributors:
    description: Individuals, organisations, or institutions that have contributed to the development
    required: true
    multivalued: true
    inlined_as_list: true
    range: Contributor
  target_organisms:
    slot_uri: EDAM:1869 # GENEPIO:0100682 maybe custom
    required: true
    description: The organism against which this primer scheme is targeted.
    range: TargetOrganism
    multivalued: true
    inlined_as_list: true

  aliases:
    slot_uri: GENEPIO:0100670
    description: Aliases for primer scheme name
    multivalued: true
    inlined_as_list: true
  vendors:
    description: "Vendors where one can purchase the primers described in the amplicon scheme or a kit containing these primers"
    multivalued: true
    inlined_as_list: true
    range: Vendor
  amplicon_size:
    slot_uri: GENEPIO:0001449
    description: "The length (in base pairs) of an amplicon in the primer scheme"
    range: integer
    required: true
    minimum_value: 1
  notes:
    description: "Notes about the amplicon primer scheme"
    slot_uri: GENEPIO:0100672
    multivalued: true
    inlined_as_list: true
    range: string
  status:
    slot_uri: GENEPIO:0100681
    description: "The status of this primer scheme (e.g. published, deprecated)"
    range: SchemeStatus
    required: true
  license:
    range: SchemeLicense
    description: "License under which the primer scheme is distributed"
    ifabsent: SchemeLicense(CC-BY-SA-4.0)
  citations:
    slot_uri: IAO:0000301
    description: "URLs of publications describing the scheme (DOIs preferred when available)"
    multivalued: true
    inlined_as_list: true
  primer_checksum:
    slot_uri: GENEPIO:0100675
    description: "Checksum for the primer scheme BED file, in format checksum_type:checksum, where checksum_type is lowercase name of checksum generator e.g. primaschema"
  primer_file_sha256:
    description: "SHA256 checksum for the primer scheme BED file"
    pattern: "^[a-fA-F0-9]{64}$"
  reference_checksum:
    description: "Checksum for the reference FASTA file, in format checksum_type:checksum, where checksum_type is lowercase name of checksum generator e.g. primaschema"
  reference_file_sha256:
    description: "SHA256 checksum for the reference FASTA file"
    pattern: "^[a-fA-F0-9]{64}$"
  derived_from:
    slot_uri: GENEPIO:0100671
    description: "Canonical name of the primer scheme from which this scheme was derived"
  tags: 
    description: "Tags to describe the primerscheme"
    range: SchemeTag
    multivalued: true
    inlined_as_list: true
  algorithm:
    description: "The algorithm (if any) used to generate this primerscheme"
    range: Algorithm
    inlined_as_list: true
  ref_selections:
    description: "Optional reference selections"
    range: RefSelection
    multivalued: true
    inlined_as_list: true
    required: false



  
enums:
  SchemeStatus:
    description: "Status of this amplicon primer scheme"
    permissible_values:
      DRAFT:
      TESTED:
      VALIDATED:
      DEPRECATED:
      WITHDRAWN:
  SchemeLicense:
    description: "License under which the primer scheme is distributed"
    permissible_values:
      CC-BY-SA-4.0:
  SchemeTag:
    description: "Tag for this primer scheme"
    permissible_values:
      WASTE-WATER:
      CLINICAL:
      FULL-GENOME:
      MULTI-TARGET:
      PANEL:
      QPCR:

